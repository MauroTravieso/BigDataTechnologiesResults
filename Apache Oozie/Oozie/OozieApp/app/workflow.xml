<!-- Workflow - Person Data - Hive Table -->
<workflow-app xmlns = "uri:oozie:workflow:0.4" name = "simple-workFlow">
   <start to = "Create_People_Table" />
  
   <!-- Step 1 --> 
   <action name = "Create_People_Table">
      <hive xmlns = "uri:oozie:hive-action:0.4">
         <job-tracker>${jobTracker}</job-tracker>
         <name-node>${nameNode}</name-node>
	 <job-xml>hive-site.xml</job-xml>
	 <configuration>
            <property>
               <name>mapred.job.queue.name</name>
               <value>${queueName}</value>
            </property>
         </configuration>
         <script>${script_name_external}</script>
      </hive>
      <ok to = "Create_ORC_Table" />
      <error to = "kill_job" />
   </action>

   <!-- Step 2 -->
   <action name = "Create_ORC_Table">
      <hive xmlns = "uri:oozie:hive-action:0.4">
         <job-tracker>${jobTracker}</job-tracker>
         <name-node>${nameNode}</name-node>
	 <job-xml>hive-site.xml</job-xml>
	 <configuration>
            <property>
               <name>mapred.job.queue.name</name>
               <value>${queueName}</value>
            </property>
         </configuration>
         <script>${script_name_orc}</script>
      </hive>
      <ok to = "Insert_Into_Table" />
      <error to = "kill_job" />
   </action>

   <!-- Step 3 -->
   <action name = "Insert_Into_Table">
      <hive xmlns = "uri:oozie:hive-action:0.4">
         <job-tracker>${jobTracker}</job-tracker>
         <name-node>${nameNode}</name-node>
	 <job-xml>hive-site.xml</job-xml>
	 <configuration>
            <property>
               <name>mapred.job.queue.name</name>
               <value>${queueName}</value>
            </property>
         </configuration>
         <script>${script_name_copy}</script>
      </hive>
      <ok to = "end" />
      <error to = "kill_job" />
   </action>
   
   <kill name = "kill_job">
      <message>Hive failed, error message[${wf:errorMessage(wf:lastErrorNode())}]</message>
   </kill>
	
   <end name = "end" />

</workflow-app>